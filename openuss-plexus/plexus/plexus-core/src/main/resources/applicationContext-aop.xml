<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
    					http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd">
	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
		Aspect Configuration
		- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
	<aop:config>
		<!-- Pointcut Definitions -->
		<aop:pointcut id="OrganisationServiceAddMemberPointcut"
			expression="execution(* org..OrganisationServiceBase.addMember(java.lang.Long, java.lang.Long)) and args(organisationId, userId)" />
		<aop:pointcut id="OrganisationServiceRemoveMemberPointcut"
			expression="execution(* org..OrganisationServiceBase.removeMember(java.lang.Long, java.lang.Long)) and args(organisationId, userId)" />

		<aop:pointcut id="OrganisationServiceAddAspirantPointcut"
			expression="execution(* org..OrganisationServiceBase.addAspirant(java.lang.Long, java.lang.Long)) and args(organisationId, userId)" />
		<aop:pointcut id="OrganisationServiceAcceptAspirantPointcut"
			expression="execution(* org..OrganisationServiceBase.acceptAspirant(java.lang.Long, java.lang.Long)) and args(organisationId, userId)" />
		<aop:pointcut id="OrganisationServiceRejectAspirantPointcut"
			expression="execution(* org..OrganisationServiceBase.rejectAspirant(java.lang.Long, java.lang.Long)) and args(organisationId, userId)" />
		
		<aop:pointcut id="InstituteServiceApplyAtDepartmentPointcut"
			expression="execution(* org..InstituteServiceBase.applyAtDepartment(org.openuss.lecture.ApplicationInfo)) and args(applicationInfo)" />
		<aop:pointcut id="DepartmentServiceAcceptInstituteApplicationPointcut"
			expression="execution(* org..DepartmentServiceBase.acceptApplication(java.lang.Long, java.lang.Long)) and args(applicationId, userId)" />
		<aop:pointcut id="DepartmentServiceRejectInstituteApplicationPointcut"
			expression="execution(* org..DepartmentServiceBase.rejectApplication(java.lang.Long, java.lang.Long)) and args(applicationId, userId)" />
		
		<aop:pointcut id="UniversityServiceCreatePointcut"
			expression="execution(* org..UniversityServiceBase.createUniversity(org.openuss.lecture.UniversityInfo, java.lang.Long)) and args(universityInfo, userId)" />
		<aop:pointcut id="UniversityServiceDeletePointcut"
			expression="execution(* org..UniversityServiceBase.removeUniversity(java.lang.Long)) and args(universityId)" />
		<aop:pointcut id="DepartmentServiceCreatePointcut"
			expression="execution(* org..DepartmentServiceBase.create(org.openuss.lecture.DepartmentInfo, java.lang.Long)) and args(departmentInfo, userId)" />
		<aop:pointcut id="DepartmentServiceDeletePointcut"
			expression="execution(* org..DepartmentServiceBase.removeDepartment(java.lang.Long)) and args(departmentId)" />
		<aop:pointcut id="InstituteServiceCreatePointcut"
			expression="execution(* org..InstituteServiceBase.create(org.openuss.lecture.InstituteInfo, java.lang.Long)) and args(instituteInfo, userId)" />
		<aop:pointcut id="InstituteServiceDeletePointcut"
			expression="execution(* org..InstituteServiceBase.removeInstitute(java.lang.Long)) and args(instituteId)" />
		<aop:pointcut id="CourseServiceDeletePointcut"
			expression="execution(* org..CourseServiceBase.removeCourse(java.lang.Long)) and args(courseId)" />

		<aop:pointcut id="CreateUniversityIndexPointcut"
			expression="execution(* org..UniversityServiceBase.createUniversity(org.openuss.lecture.UniversityInfo, java.lang.Long)) and args(universityInfo, userId)" />
		<aop:pointcut id="RemoveUniversityIndexPointcut"
			expression="execution(* org..UniversityServiceBase.removeUniversity(java.lang.Long)) and args(universityId)" />
		<aop:pointcut id="UpdateUniversityIndexPointcut"
			expression="execution(* org..UniversityServiceBase.update(org.openuss.lecture.UniversityInfo)) and args(universityInfo)" />
		<aop:pointcut id="SetUniversityStatusIndexPointcut"
			expression="execution(* org..UniversityServiceBase.setUniversityStatus(java.lang.Long, boolean)) and args(universityId, status)" />
			
		<aop:pointcut id="CreateDepartmentIndexPointcut"
			expression="execution(* org..DepartmentServiceBase.create(org.openuss.lecture.DepartmentInfo, java.lang.Long)) and args(departmentInfo, userId)" />
		<aop:pointcut id="RemoveDepartmentIndexPointcut"
			expression="execution(* org..DepartmentServiceBase.removeDepartment(java.lang.Long)) and args(departmentId)" />
		<aop:pointcut id="UpdateDepartmentIndexPointcut"
			expression="execution(* org..DepartmentServiceBase.update(org.openuss.lecture.DepartmentInfo)) and args(departmentInfo)" />
		<aop:pointcut id="SetDepartmentStatusIndexPointcut"
			expression="execution(* org..DepartmentServiceBase.setDepartmentStatus(java.lang.Long, boolean)) and args(departmentId, status)" />
			
		<aop:pointcut id="CreateInstituteIndexPointcut"
			expression="execution(* org..InstituteServiceBase.create(org.openuss.lecture.InstituteInfo, java.lang.Long)) and args(instituteInfo, userId))" />
		<aop:pointcut id="RemoveInstituteIndexPointcut"
			expression="execution(* org..InstituteServiceBase.removeInstitute(java.lang.Long)) and args(instituteId)" />
		<aop:pointcut id="UpdateInstituteIndexPointcut"
			expression="execution(* org..InstituteServiceBase.update(org.openuss.lecture.InstituteInfo)) and args(instituteInfo)" />
		<aop:pointcut id="SetInstituteStatusIndexPointcut"
			expression="execution(* org..InstituteServiceBase.setInstituteStatus(java.lang.Long, boolean)) and args(instituteId, status)" />		
						
		<aop:pointcut id="CreateCourseIndexPointcut"
			expression="execution(* org..CourseServiceBase.create(org.openuss.lecture.CourseInfo)) and args(courseInfo)" />
		<aop:pointcut id="RemoveCourseIndexPointcut"
			expression="execution(* org..CourseServiceBase.removeCourse(java.lang.Long)) and args(courseId)" />
		<aop:pointcut id="UpdateCourseIndexPointcut"
			expression="execution(* org..CourseServiceBase.updateCourse(org.openuss.lecture.CourseInfo)) and args(courseInfo)" />
		<aop:pointcut id="UpdateCourseIndexOnPeriodPointcut"
			expression="execution(* org..LectureServiceBase.persist(org.openuss.lecture.Period)) and args(period)" />
		
		<!-- Aspect Definitions -->
		<aop:aspect id="userAdministrationMailSenderAspect" ref="userAdministrationMailSenderAspectBean">
			<aop:after-returning method="sendAddMemberMail"
				pointcut-ref="OrganisationServiceAddMemberPointcut"
				arg-names="organisationId, userId" />
			<aop:after-returning method="sendRemoveMemberMail"
				pointcut-ref="OrganisationServiceRemoveMemberPointcut"
				arg-names="organisationId, userId" />
		</aop:aspect>
		
		<aop:aspect id="addAspirantMailSenderAspect" ref="aspirantMailSenderAspectBean">
			<aop:after-returning 
				method="sendAddAspirantMail"
				pointcut-ref="OrganisationServiceAddAspirantPointcut"
				arg-names="organisationId, userId" />
		</aop:aspect>
		
		<aop:aspect id="rejectAspirantMailSenderAspect" ref="aspirantMailSenderAspectBean">
			<aop:after-returning 
				method="sendRejectAspirantMail"
				pointcut-ref="OrganisationServiceRejectAspirantPointcut"
				arg-names="organisationId, userId" />
		</aop:aspect>
		
		<aop:aspect id="acceptAspirantMailSenderAspect" ref="aspirantMailSenderAspectBean">
			<aop:after-returning 
				method="sendAcceptAspirantMail"
				pointcut-ref="OrganisationServiceAcceptAspirantPointcut"
				arg-names="organisationId, userId" />
		</aop:aspect>
		
		<aop:aspect id="instituteActivationMailSenderAspect" ref="instituteActivationMailSenderAspectBean">
			<aop:after-returning 
				method="sendInstituteActivationMail"
				pointcut-ref="InstituteServiceCreatePointcut"
				arg-names="instituteInfo, userId" />
		</aop:aspect>

		<aop:aspect id="applyAtDepartmentMailSenderAspect" ref="instituteDepartmentMailSenderAspectBean">
			<aop:after-returning 
				method="sendApplyInstituteAtDepartmentMail"
				pointcut-ref="InstituteServiceApplyAtDepartmentPointcut"
				arg-names="applicationInfo" />
		</aop:aspect>
		
		<aop:aspect id="acceptInstituteMailSenderAspect" ref="instituteDepartmentMailSenderAspectBean">
			<aop:after-returning 
				method="sendAcceptApplicationAtDepartmentMail"
				pointcut-ref="DepartmentServiceAcceptInstituteApplicationPointcut"
				arg-names="applicationId, userId" />
		</aop:aspect>
		
		<aop:aspect id="rejectInstituteMailSenderAspect" ref="instituteDepartmentMailSenderAspectBean">
			<aop:after-returning 
				method="sendRejectApplicationAtDepartmentMail"
				pointcut-ref="DepartmentServiceRejectInstituteApplicationPointcut"
				arg-names="applicationId, userId" />
		</aop:aspect>

		<aop:aspect id="bookmarkMaintenanceAspect"
			ref="bookmarkMaintenanceAspectBean">
			<aop:after-returning method="bookmarkUniversity"
				pointcut-ref="UniversityServiceCreatePointcut"
				arg-names="universityInfo, userId" />
			<aop:before method="deleteBookmarksOfUniversity"
				pointcut-ref="UniversityServiceDeletePointcut"
				arg-names="universityId" />
			<aop:after-returning method="bookmarkDepartment"
				pointcut-ref="DepartmentServiceCreatePointcut"
				arg-names="departmentInfo, userId" />
			<aop:before method="deleteBookmarksOfDepartment"
				pointcut-ref="DepartmentServiceDeletePointcut"
				arg-names="departmentId" />
			<aop:after-returning method="bookmarkInstitute"
				pointcut-ref="InstituteServiceCreatePointcut"
				arg-names="instituteInfo, userId" />
			<aop:before method="deleteBookmarksOfInstitute"
				pointcut-ref="InstituteServiceDeletePointcut"
				arg-names="instituteId" />
			<aop:before method="deleteBookmarksOfCourse"
				pointcut-ref="CourseServiceDeletePointcut" arg-names="courseId" />
		</aop:aspect>

		<aop:aspect id="universityIndexAspect"
			ref="universityIndexAspectBean">

			<aop:after-returning 
				method="createUniversityIndex"
				pointcut-ref="CreateUniversityIndexPointcut"
				arg-names="universityInfo, userId" />
			<aop:after-returning 
				method="updateUniversityIndex"
				pointcut-ref="UpdateUniversityIndexPointcut"
				arg-names="universityInfo" />
			<aop:after-returning 
				method="updateUniversityIndexById"
				pointcut-ref="SetUniversityStatusIndexPointcut"
				arg-names="universityId, status" />
			<aop:after-returning 
				method="deleteUniversityIndex"
				pointcut-ref="RemoveUniversityIndexPointcut"
				arg-names="universityId" />
		</aop:aspect>

		<aop:aspect id="departmentIndexAspect"
			ref="departmentIndexAspectBean">
			<aop:after-returning method="createDepartmentIndex"
				pointcut-ref="CreateDepartmentIndexPointcut"
				arg-names="departmentInfo, userId" />
			<aop:after-returning method="updateDepartmentIndex"
				pointcut-ref="UpdateDepartmentIndexPointcut"
				arg-names="departmentInfo" />
			<aop:after-returning method="updateDepartmentIndexById"
				pointcut-ref="SetDepartmentStatusIndexPointcut"
				arg-names="departmentId, status" />
			<aop:after-returning method="deleteDepartmentIndex"
				pointcut-ref="RemoveDepartmentIndexPointcut"
				arg-names="departmentId" />
		</aop:aspect>

		<aop:aspect id="instituteIndexAspect"
			ref="instituteIndexAspectBean">
			<aop:after-returning 
				method="createInstituteIndex"
				pointcut-ref="CreateInstituteIndexPointcut"
				arg-names="instituteInfo, userId" />
			<aop:after-returning 
				method="updateInstituteIndex"
				pointcut-ref="UpdateInstituteIndexPointcut"
				arg-names="instituteInfo" />
			<aop:after-returning method="updateInstituteIndexById"
				pointcut-ref="SetInstituteStatusIndexPointcut"
				arg-names="instituteId, status" />
			<aop:after-returning 
				method="deleteInstituteIndex"
				pointcut-ref="RemoveInstituteIndexPointcut"
				arg-names="instituteId" />
		</aop:aspect>

		<aop:aspect id="courseIndexAspect"
			ref="courseIndexAspectBean">
			<aop:after-returning
				method="updateCourseIndexOnPeriodUpdate"
				pointcut-ref="UpdateCourseIndexOnPeriodPointcut"
				arg-names="period" />
			<aop:after-returning method="createCourseIndex"
				pointcut-ref="CreateCourseIndexPointcut"
				arg-names="courseInfo" />
			<aop:after-returning method="updateCourseIndex"
				pointcut-ref="UpdateCourseIndexPointcut"
				arg-names="courseInfo" />
			<aop:after-returning method="deleteCourseIndex"
				pointcut-ref="RemoveCourseIndexPointcut"
				arg-names="courseId" />
		</aop:aspect>

		<aop:aspect id="mailingStatusAspect"
			ref="mailingStatusAspectBean">
			<aop:after-returning method="updateMailingStatus"
				pointcut="execution(* org..MessageJobDaoBase.update(org.openuss.messaging.MessageJob)) and args(messageJob)"
				arg-names="messageJob" />
		</aop:aspect>

	</aop:config>

	<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
		Aspect Bean Definitions
		- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
	<bean id="userAdministrationMailSenderAspectBean"
		class="org.openuss.aop.MailSenderAspectImpl">
		<property name="userDao" ref="userDao" />
		<property name="organisationDao" ref="organisationDao" />
		<property name="universityDao" ref="universityDao" />
		<property name="departmentDao" ref="departmentDao" />
		<property name="instituteDao" ref="instituteDao" />
		<property name="messageService" ref="messageService" />
		<property name="systemService" ref="systemService" />
	</bean>

	<bean id="aspirantMailSenderAspectBean"
		class="org.openuss.aop.AspirantMailSenderAspectImpl">
		<property name="userDao" ref="userDao" />
		<property name="organisationDao" ref="organisationDao" />
		<property name="universityDao" ref="universityDao" />
		<property name="departmentDao" ref="departmentDao" />
		<property name="instituteDao" ref="instituteDao" />
		<property name="messageService" ref="messageService" />
		<property name="systemService" ref="systemService" />
	</bean>
	
	<bean id="instituteActivationMailSenderAspectBean"
		class="org.openuss.aop.InstituteActivationMailSenderAspectImpl">
		<property name="userDao" ref="userDao" />
		<property name="instituteDao" ref="instituteDao" />
		<property name="registrationService" ref="registrationService" />
		<property name="messageService" ref="messageService" />
		<property name="systemService" ref="systemService" />
	</bean>
	
	<bean id="instituteDepartmentMailSenderAspectBean"
		class="org.openuss.aop.InstituteDepartmentMailSenderAspectImpl">
		<property name="userDao" ref="userDao" />
		<property name="applicationDao" ref="applicationDao" />
		<property name="instituteDao" ref="instituteDao" />
		<property name="departmentDao" ref="departmentDao" />
		<property name="messageService" ref="messageService" />
		<property name="systemService" ref="systemService" />
	</bean>

	<bean id="bookmarkMaintenanceAspectBean"
		class="org.openuss.aop.BookmarkMaintenanceAspectImpl">
		<property name="desktopService" ref="desktopService2" />
	</bean>

	<bean id="mailingStatusAspectBean"
		class="org.openuss.newsletter.MailingStatusAspect">
		<property name="mailDao" ref="mailDao" />
	</bean>

	<bean id="universityIndexAspectBean"
		class="org.openuss.lecture.UniversityIndexingAspect">
		<property name="indexerService" ref="indexerService" />
		<property name="universityDao" ref="universityDao" />
		<property name="universityService" ref="universityService" />
	</bean>

	<bean id="departmentIndexAspectBean"
		class="org.openuss.lecture.DepartmentIndexingAspect">
		<property name="indexerService" ref="indexerService" />
		<property name="departmentDao" ref="departmentDao" />
		<property name="departmentService" ref="departmentService" />
	</bean>

	<bean id="instituteIndexAspectBean"
		class="org.openuss.lecture.InstituteIndexingAspect">
		<property name="indexerService" ref="indexerService" />
		<property name="instituteDao" ref="instituteDao" />
		<property name="instituteService" ref="instituteService" />
	</bean>

	<bean id="courseIndexAspectBean"
		class="org.openuss.lecture.CourseIndexingAspect">
		<property name="indexerService" ref="indexerService" />
		<property name="courseDao" ref="courseDao" />
	</bean>
	
	<bean id="indexAspectBean"
		class="org.openuss.aop.IndexAspectImpl">
		<property name="indexerService" ref="indexerService" />
		<property name="universityDao" ref="universityDao" />
		<property name="universityService" ref="universityService" />
		<property name="departmentDao" ref="departmentDao" />
		<property name="departmentService" ref="departmentService" />
		<property name="instituteDao" ref="instituteDao" />
		<property name="courseTypeDao" ref="courseTypeDao" />
		<property name="courseDao" ref="courseDao" />
	</bean>

</beans>
