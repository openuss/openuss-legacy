/* Generated by Freestyle Learning Group */

package freestyleLearningGroup.independent.gui;

import java.awt.Component;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.ActionEvent;
import java.net.URL;

import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLayeredPane;
import javax.swing.JPanel;
import javax.swing.KeyStroke;

public class FLGImageDialog extends JFrame {
    protected Image image;
    protected java.awt.Dimension screenDimemsion;
    protected JLayeredPane layeredPane;
    protected JButton defaultButton;

    public FLGImageDialog(String title, URL imageURL) {
        setUndecorated(true);
        image = FLGImageUtility.loadImageAndWait(imageURL);
        setSize(image.getWidth(this), image.getHeight(this));
        java.awt.Dimension screenDimemsion = java.awt.Toolkit.getDefaultToolkit().getScreenSize();
        setLocation((int)(screenDimemsion.getWidth() - getWidth()) / 2, (int)(screenDimemsion.getHeight() - getHeight()) / 2);
        FLGImageDialogDrawPanel background = new FLGImageDialogDrawPanel();
        layeredPane = getLayeredPane();
        layeredPane.add(background, new Integer(1));
        setVisible(true);
    }

    public void setDefaultButton(JButton button) {
        defaultButton = button;
        if (defaultButton.getAction() != null) {
            defaultButton.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("ESCAPE"), "cancel");
            defaultButton.getActionMap().put("cancel",
                new AbstractAction() {
                    public void actionPerformed(ActionEvent e) {
                        defaultButton.getAction().actionPerformed(e);
                    }
                });
            defaultButton.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("ENTER"), "ok");
            defaultButton.getActionMap().put("ok",
                new AbstractAction() {
                    public void actionPerformed(ActionEvent e) {
                        defaultButton.getAction().actionPerformed(e);
                    }
                });
        }
    }

    public void addToLayeredPane(Component component, int layer) {
        layeredPane.add(component, new Integer(layer));
    }

    class FLGImageDialogDrawPanel extends JPanel {
        public FLGImageDialogDrawPanel() {
            setBounds(0, 0, image.getWidth(this), image.getHeight(this));
        }

        public void paint(Graphics g) {
            if (image != null) {
                g.drawImage(image, 0, 0, this);
            }
        }
    }
    
    public static void main(String[] args) {
        final FLGImageDialog programInformationDialog =
            new FLGImageDialog("title", FLGImageDialog.class.getClassLoader().getResource("freestyleLearning/homeCore/images/splash.gif"));
        JButton dismissButton = new JButton("Hallo Norman!");
        dismissButton.setOpaque(false);
        AbstractAction dismissAction = new AbstractAction(dismissButton.getText()) {
            public void actionPerformed(ActionEvent e) {
                programInformationDialog.dispose();
            }
        };
        dismissButton.setAction(dismissAction);
        dismissButton.setBounds(28, 200, dismissButton.getPreferredSize().width, 25);
        programInformationDialog.setDefaultButton(dismissButton);
        programInformationDialog.addToLayeredPane(dismissButton, 2);
    }
    
}

