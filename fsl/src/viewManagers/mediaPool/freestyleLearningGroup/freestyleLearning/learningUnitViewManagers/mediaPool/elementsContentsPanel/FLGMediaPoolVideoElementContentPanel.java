/* Generated by Freestyle Learning Group */

package freestyleLearningGroup.freestyleLearning.learningUnitViewManagers.mediaPool.elementsContentsPanel;

import java.awt.*;
import java.io.*;
import javax.swing.*;

import freestyleLearning.learningUnitViewAPI.*;
import freestyleLearning.learningUnitViewAPI.elementsContentsPanel.*;
import freestyleLearning.learningUnitViewAPI.events.learningUnitEvent.*;
import freestyleLearning.learningUnitViewAPI.events.learningUnitViewEvent.*;
import freestyleLearningGroup.freestyleLearning.learningUnitViewManagers.mediaPool.data.xmlBindingSubclasses.*;
import freestyleLearningGroup.freestyleLearning.learningUnitViewManagers.mediaPool.events.learningUnitViewEvent.*;
import freestyleLearningGroup.independent.gui.*;
import freestyleLearningGroup.independent.media.*;

public class FLGMediaPoolVideoElementContentPanel extends FLGMediaPoolPlayableMediaContentPanel { 
    public void init(FSLLearningUnitViewManager learningUnitViewManager,
        FSLLearningUnitEventGenerator learningUnitEventGenerator, boolean editMode) {
            super.init(learningUnitViewManager, learningUnitEventGenerator, editMode);
            learningUnitViewManager.addLearningUnitViewListener(new VideoElementContentPanel_Adapter());
    }
    
    protected void buildDependentUI(boolean reloadIfAlreadyLoaded) {
        if (!isPlaying) {
            super.buildDependentUI(reloadIfAlreadyLoaded);
            setLayout(new BorderLayout());
            player.setScaleToFit(false);
        }
    }
    
    class VideoElementContentPanel_Adapter extends FSLLearningUnitViewAdapter {        
        public void learningUnitViewScaleModeChanged(FSLLearningUnitViewEvent event) {
            if (player != null) {
                player.setScaleToFit(scaleToFit);
            }
        }
        public void learningUnitViewSpecificEventOccurred(FSLLearningUnitViewEvent e) {
            int mediaPoolViewEventType = ((FLGMediaPoolViewEvent)e).getEventSpecificType();
            switch (mediaPoolViewEventType) {
                case FLGMediaPoolViewEvent.MEDIA_PLAY_BUTTON_PRESSED: {
                    stop();
                    //removeAll();
                    add(player, BorderLayout.CENTER);
                    FLGMediaPoolElement element = (FLGMediaPoolElement)learningUnitViewManager.getLearningUnitViewElementsManager().getLearningUnitViewElement(activeLearningUnitViewElementId, false);
                    if (element.getType().equals(FLGMediaPoolElement.FILE_TYPE_VIDEO)) {
                        loadMediaToCurrentElement();
                        play();
                    }
                    break;
                }
            }
        }
    }
}
