/* Generated by Freestyle Learning Group */

package freestyleLearning.homeCore.usersManager;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.BorderFactory;
import javax.swing.JCheckBox;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JTextField;

import freestyleLearningGroup.independent.gui.FLGColumnLayout;
import freestyleLearningGroup.independent.gui.FLGOptionPane;
import freestyleLearningGroup.independent.util.FLGInternationalization;

/**
 * This dialog allows an user to input his login name and password.
 * @author Norman Lahme, Mirko Wahn
 * @version 1.0
 */
class FSLUserLoginDialog {
    private JPanel dialogContentComponent;
    private FLGInternationalization internationalization;
    private boolean automaticLoginEnabled;
    private JTextField textField_userName;
    private JPasswordField passwordField_userPassword;
    private JCheckBox checkBox_enableAutomaticLogin;
    private String userName;
    private String userPassword;

    FSLUserLoginDialog() {
        internationalization = new FLGInternationalization("freestyleLearning.homeCore.usersManager.internationalization",
            FSLUserLoginDialog.class.getClassLoader());
        automaticLoginEnabled = false;
        buildIndependentUI();
    }

    public boolean showDialog() {
        buildDependentUI();
        int returnValue = FLGOptionPane.showConfirmDialog(dialogContentComponent, internationalization.getString("dialog.login.title"),
            FLGOptionPane.OK_CANCEL_OPTION, FLGOptionPane.PLAIN_MESSAGE);
        if (returnValue == FLGOptionPane.OK_OPTION) {
            userName = textField_userName.getText();
            userPassword = new String(passwordField_userPassword.getPassword());
        }
        return returnValue == FLGOptionPane.OK_OPTION;
    }

    void buildDependentUI() {
        userName = null;
        userPassword = null;
        textField_userName.setText("");
        passwordField_userPassword.setText("");
        // checkBox_enableAutomaticLogin.setEnabled(false);
        checkBox_enableAutomaticLogin.setSelected(automaticLoginEnabled);
    }

    String getUserName() {
        return userName;
    }

    String getUserPassword() {
        return userPassword;
    }

    boolean isAutomaticLoginEnabled() {
        return automaticLoginEnabled;
    }

    private void buildIndependentUI() {
        dialogContentComponent = new JPanel(new FLGColumnLayout());
        dialogContentComponent.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        textField_userName = new JTextField(20);
        passwordField_userPassword = new JPasswordField(20);
        passwordField_userPassword.setFont(textField_userName.getFont());
        checkBox_enableAutomaticLogin = new JCheckBox(internationalization.getString("label.automaticLogin.text"), false);
        checkBox_enableAutomaticLogin.addActionListener(
            new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    automaticLoginEnabled = checkBox_enableAutomaticLogin.isSelected();
                }
            });
        dialogContentComponent.add(new JLabel(internationalization.getString("label.username.title")), FLGColumnLayout.LEFT);
        dialogContentComponent.add(textField_userName, FLGColumnLayout.LEFTEND);
        dialogContentComponent.add(new JLabel(internationalization.getString("label.password.title")), FLGColumnLayout.LEFT);
        dialogContentComponent.add(passwordField_userPassword, FLGColumnLayout.LEFTEND);
        dialogContentComponent.add(new JLabel(""), FLGColumnLayout.LEFT);
        dialogContentComponent.add(checkBox_enableAutomaticLogin, FLGColumnLayout.LEFTEND);
    }
}
