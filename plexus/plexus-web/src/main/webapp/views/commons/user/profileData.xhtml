<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:o="http://www.openuss.org/jsfcontrols"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:t="http://myfaces.apache.org/tomahawk"
    xmlns:c="http://java.sun.com/jstl/core"
    xmlns:fck="http://www.fck-faces.org/fck-faces"
	xmlns:ts="http://myfaces.apache.org/sandbox">

	<h:outputLabel id="avatarSelectLabel" value="${msg.user_profile_image}" for="avatarSelect" styleClass="fieldLabel"/>

	<h:panelGrid columns="2">
		<h:panelGroup>
			
			<c:if test="#{not empty user.imageId}">
				<h:graphicImage styleClass="userphoto"
					renderer="${not empty user.imageId}"
					value="/files?fileid=#{user.imageId}"
					alt="#{user.contact.firstName} #{user.contact.lastName}"
					title="#{user.contact.firstName} #{user.contact.lastName}"/> 
				&#160;
		  		<h:commandLink 
		  			actionListener="#{views$secured$user$profile.removeImage}" 
		  			immediate="true" 
		  			title="#{msg.user_profile_command_remove_image}">
		  			<h:graphicImage value="/images/icons/remove.gif" alt="delete"/>
		  		</h:commandLink>
			</c:if>
					
			<c:if test="#{empty user.imageId}">
				<h:graphicImage 
					styleClass="userphoto" 
					value="/images/icons/no_pic.gif" 
					alt="#{msg.user_profile_no_image}" 
					title="#{msg.user_profile_no_image}"/>
			</c:if>
		</h:panelGroup>

		<h:panelGroup>
			<h:outputLabel value="#{msg.user_profile_image}" for="image"/>
			<br/>
		  	<t:inputFileUpload id="image" storage="file" accept="image/*" immediate="true" styleClass="uploadField" >
  				<f:valueChangeListener type="org.openuss.web.upload.UploadListener" />
  			</t:inputFileUpload>
		  	<h:message for="image" styleClass="fieldError" showDetail="true" showSummary="false"/>
		</h:panelGroup>
	</h:panelGrid>

  	<h:outputLabel value="#{msg.user_profile_portrait}" for="portraitEditor" styleClass="fieldLabel"/>
	<fck:editor value="#{user.profile.portrait}" id="portraitEditor" toolbarSet="Portrait" width="100%"  height="200px"/>

	<o:input entity="user.profile" property="ageGroup" maxlength="50"/>
	<o:input entity="user.profile" property="matriculation" maxlength="50"/>
	<o:input entity="user.profile" property="studies" maxlength="50"/>

	<o:input entity="user.profile" property="emailPublic"/>
	<o:input entity="user.profile" property="addressPublic"/>
	<o:input entity="user.profile" property="telephonePublic"/>
</ui:composition>