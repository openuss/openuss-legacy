<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:o="http://www.openuss.org/jsfcontrols"
	xmlns:oc="http://www.openuss.org/jsf-core"
	xmlns:s="http://www.openuss.org/jsf-security"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:plexus="http://www.openuss.org/plexus/jsf"
	xmlns:fck="http://www.fck-faces.org/fck-faces">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title><ui:insert name="title" /></title>
	<link href="../../css/openuss.css" rel="stylesheet" type="text/css"	media="screen,screen" />
	<link href="../../css/openuss-typo.css" rel="stylesheet" type="text/css" media="screen" />
</head>
<body>
<!-- text above will be ignored -->
<ui:composition template="/views/layout/layout.xhtml">
	<ui:define name="title">
		<h:outputText value="#{msg['seminarpool_main_title']}" />
	</ui:define>
	<ui:define name="navigation">
		<ui:include src="/views/commons/navigation/seminarpool.xhtml" />
	</ui:define>

	<ui:define name="content" styleClass="footer_normal">
	
		<h:form id="seminarpool_conditions">
		    <plexus:dataTable 
		    	id="conditionsTable" 
		    	label="#{msg.seminarpool_conditions_subheading}" 
		    	value="views$secured$seminarpool$conditions$seminarpoolrequirements.conditionsTable" 
		    	columnClasses="col_max_left, col_max_left, col_commands"
		    	var="bean" 
		    	rows="20">  
		      
				<t:column>
					<plexus:commandSortHeader columnName="fieldDescription">
		   				<h:outputText value="#{msg['seminarpool_field_description']}"/>
					</plexus:commandSortHeader>
					<h:outputText value="#{bean.conditionDescription}"/>
				</t:column>
				
				<t:column sortable="true">
					<plexus:commandSortHeader columnName="fieldType">
						<h:outputText value="#{msg['seminarpool_field_type']}"/>
					</plexus:commandSortHeader>
					<h:outputText value="#{bean.fieldType}">
						<f:converter converterId="seminarpoolConditionTypeConverter" />
					</h:outputText>
				</t:column>
			<c:if test="#{phaseController.statusBeforeEqualsRegistrationComplete}">
				<plexus:column header="#{msg.commands_header}">
					<plexus:command
						bean="#{views$secured$seminarpool$conditions$seminarpoolrequirements}"
						action="removeCondition"
						onclick="if (!confirm('#{msg.seminarpool_allocation_by_course_step2_remove_user_confirmation}')) return false"
						label="#{msg.seminarpool_condition_command_remove}"
						title="#{msg.seminarpool_condition_command_remove_hint}"
						styleClass="icon_remove" />
				</plexus:column>
			</c:if>
			</plexus:dataTable>
		</h:form>
	<c:if test="#{phaseController.statusBeforeEqualsRegistrationComplete}">
		<s:acl domainObject="#{seminarpoolInfo}" hasPermission="#{ACL.GCRUD}">	
			<h:form id="seminarpool_condition_new_form">
		  		<o:block label="#{msg['seminarpool_conditions_add_subheading']}" styleClass="form_box">
					<h:outputLabel for="conditionType" value="#{msg.seminarpool_field_type}" styleClass="field_label"/>
					<h:selectOneMenu id="conditionType" 
						layout="pageDirection" 
						value="#{views$secured$seminarpool$conditions$seminarpoolrequirements.seminarConditionInfo.fieldType}" 
						valueChangeListener="#{views$secured$seminarpool$conditions$seminarpoolrequirements.processConditionTypeChanged}"
						styleClass="pulldown">
						<f:converter converterId="seminarpoolConditionTypeConverter" />
						<f:selectItems value="#{seminarpoolRegistration.conditionTypes}"/>
					</h:selectOneMenu>
					<h:message for="conditionType" styleClass="field_error"/>	
		 			<o:input 
							label="#{msg.seminarpool_field_description}"
							entity="views$secured$seminarpool$conditions$seminarpoolrequirements.seminarConditionInfo" 
							property="conditionDescription" 
							type="textarea"
							maxlength="950"
							required="true"/>
						<br/>
					<h:commandButton
						value="#{msg['seminarpool_conditions_command_add']}"
						actionListener="#{views$secured$seminarpool$conditions$seminarpoolrequirements.addCondition}"
						title="#{msg['seminarpool_conditions_command_add_hint']}"
						styleClass="button_save" />
				</o:block>	
		 	</h:form> 
		</s:acl>
	</c:if>
	</ui:define>
</ui:composition>
<!-- text above will be ignored -->
</body>
</html>
