<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:o="http://www.openuss.org/jsfcontrols"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:plexus="http://www.openuss.org/plexus/jsf"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:news="http://www.openuss.org/news/jsf"
	xmlns:fck="http://www.fck-faces.org/fck-faces">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title><ui:insert name="title" /></title>
<link href="../../css/openuss.css" rel="stylesheet" type="text/css"
	media="screen,screen" />
<link href="../../css/openuss-typo.css" rel="stylesheet" type="text/css"
	media="screen" />
</head>

<body>

<!-- text above will be ignored -->
<ui:composition template="/views/layout/layout.xhtml">
	<ui:define name="title">
		<h:outputText value="#{msg['openuss4us_navigation_header']}" />
	</ui:define>
	<ui:define name="navigation">
		<ui:include src="/views/commons/navigation/desktop.xhtml" />
	</ui:define>
	<ui:define name="sidebar">
		<ui:include src="/views/commons/sidebar/useroptions.xhtml" />
		<ui:include src="/views/commons/sidebar/default.xhtml" />
	</ui:define>
	<ui:define name="content">
		<h:form id="openuss4us_buddylist_edittags"
			enctype="multipart/form-data">
			<o:block styleClass="form_box"
				label="#{msg.openuss4us_buddylist_edit_tags_header} #{buddy.name}">
				<div styleClass="content_normal">
				<div class="userimage"><h:graphicImage styleClass="userphoto"
					value="/files?fileid=#{buddy.userPicture}" title="#{buddy.name}"
					rendered="#{not empty buddy.userPicture}" /> <h:graphicImage
					styleClass="userphoto" value="/images/icons/no_pic.gif"
					alt="#{msg.user_profile_no_image}"
					title="#{msg.user_profile_no_image}"
					rendered="#{empty buddy.userPicture}" /></div>
				</div>
				</o:block><plexus:dataTable label="#{msg.openuss4us_buddylist_current_tags}"
					id="buddyTagsTable"
					value="views$secured$buddylist$edittags.buddyTags" var="currentTag">
					<t:column>
						<h:outputText value="#{currentTag} "
							styleClass="content_font_normal" />
					</t:column>
					<t:column>
						<h:commandLink value="#{msg.openuss4us_buddylist_delete_tag}"
							action="#{views$secured$buddylist$edittags.deleteTag}" immediate="true"/>
					</t:column>
				</plexus:dataTable></h:form>
				<h:form id="openuss4us_buddylist_addtag">
				<o:block><div styleClass="content_normal">
				<o:input entity="views$secured$buddylist$edittags" property="newTag" id="input_tag"
					label="#{msg.openuss4us_buddylist_command_tag_add}" styleClass="field" required="true">
					<f:validateLength minimum="3" />
					<f:converter converterId="xssFilter"/>
					</o:input>
				<br /><span styleClass="content_font_normal">
				<t:dataList 
					id="usedTagsList"  
					var="aUsedTag"
					styleClass="content_font_normal"
					label="#{msg.openuss4us_buddylist_command_tag_add_from_list}"
					value="#{views$secured$buddylist$edittags.usedTags}"
					rendered="#{not empty views$secured$buddylist$edittags.usedTags}"
					layout="simple" rowCountVar="rowCount" rowIndexVar="index">
					
						<a href="#"
							onClick="javascript:document.getElementById('_id6:openuss4us_buddylist_addtag:newTag').value='#{aUsedTag}'">#{aUsedTag}</a>
					<h:outputText value="," rendered="#{index + 1 lt rowCount}"/>
				
				</t:dataList></span>
				</div>
			</o:block>
			<o:block>
				<h:commandButton id="newTagButton"
					action="#{views$secured$buddylist$edittags.addTag}" value="#{msg.openuss4us_buddylist_button_add_tag}"
					hint="#{msg.openuss4us_buddylist_button_add_tag}" styleClass="button" />
				<h:commandButton id="back2buddylist" action="openuss4us_buddylist"
					value="#{msg.openuss4us_backward}"
					title="#{msg.openuss4us_backward}" styleClass="button" immediate="true"/>
			</o:block>
		</h:form>
	</ui:define>
</ui:composition>
<!-- text above will be ignored -->
</body>
</html>
